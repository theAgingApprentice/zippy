<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>icUnderware: API reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="underwareLogo100x102.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">icUnderware
   </div>
   <div id="projectbrief">Starting point of your next robot&#39;s Integrated Circuit firmware.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">API reference </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h3><a class="anchor" id="autotoc_md175"></a>
AsyncMqttClient()</h3>
<p >Instantiate a new <a class="el" href="class_async_mqtt_client.html">AsyncMqttClient</a> object.</p>
<h2><a class="anchor" id="autotoc_md176"></a>
Configuration</h2>
<h3><a class="anchor" id="autotoc_md177"></a>
AsyncMqttClient&amp; setKeepAlive(uint16_t &lt;tt&gt;keepAlive&lt;/tt&gt;)</h3>
<p ><a class="el" href="class_set.html">Set</a> the keep alive. Defaults to 15 seconds.</p>
<ul>
<li>**<code>keepAlive</code>**: Keep alive in seconds</li>
</ul>
<h3><a class="anchor" id="autotoc_md178"></a>
AsyncMqttClient&amp; setClientId(const char* &lt;tt&gt;clientId&lt;/tt&gt;)</h3>
<p ><a class="el" href="class_set.html">Set</a> the client ID. Defaults to <code>esp8266&lt;chip ID on 6 hex caracters&gt;</code>.</p>
<ul>
<li>**<code>clientId</code>**: Client ID</li>
</ul>
<h3><a class="anchor" id="autotoc_md179"></a>
AsyncMqttClient&amp; setCleanSession(bool &lt;tt&gt;cleanSession&lt;/tt&gt;)</h3>
<p >Whether or not to set the CleanSession flag. Defaults to <code>true</code>.</p>
<ul>
<li>**<code>cleanSession</code>**: clean session wanted or not</li>
</ul>
<h3><a class="anchor" id="autotoc_md180"></a>
AsyncMqttClient&amp; setMaxTopicLength(uint16_t &lt;tt&gt;maxTopicLength&lt;/tt&gt;)</h3>
<p ><a class="el" href="class_set.html">Set</a> the maximum allowed topic length to receive. If an MQTT packet is received with a topic longer than this maximum, the packet will be ignored. Defaults to <code>128</code>.</p>
<ul>
<li>**<code>maxTopicLength</code>**: Maximum allowed topic length to receive</li>
</ul>
<h3><a class="anchor" id="autotoc_md181"></a>
AsyncMqttClient&amp; setCredentials(const char* &lt;tt&gt;username&lt;/tt&gt;, const char* &lt;tt&gt;password&lt;/tt&gt; = nullptr)</h3>
<p ><a class="el" href="class_set.html">Set</a> the username/password. Defaults to non-auth.</p>
<ul>
<li>**<code>username</code>**: Username</li>
<li>**<code>password</code>**: Password</li>
</ul>
<h3><a class="anchor" id="autotoc_md182"></a>
AsyncMqttClient&amp; setWill(const char* &lt;tt&gt;topic&lt;/tt&gt;, uint8_t &lt;tt&gt;qos&lt;/tt&gt;, bool &lt;tt&gt;retain&lt;/tt&gt;, const char* &lt;tt&gt;payload&lt;/tt&gt; = nullptr, size_t &lt;tt&gt;length&lt;/tt&gt; = 0)</h3>
<p ><a class="el" href="class_set.html">Set</a> the Last Will Testament. Defaults to none.</p>
<ul>
<li>**<code>topic</code>**: Topic of the LWT</li>
<li>**<code>qos</code>**: QoS of the LWT</li>
<li>**<code>retain</code>**: Retain flag of the LWT</li>
<li>**<code>payload</code>**: Payload of the LWT. If unset, the payload will be empty</li>
<li>**<code>length</code>**: Payload length. If unset or set to 0, the payload will be considered as a string and its size will be calculated using <code>strlen(payload)</code></li>
</ul>
<h3><a class="anchor" id="autotoc_md183"></a>
AsyncMqttClient&amp; setServer(IPAddress &lt;tt&gt;ip&lt;/tt&gt;, uint16_t &lt;tt&gt;port&lt;/tt&gt;)</h3>
<p ><a class="el" href="class_set.html">Set</a> the server.</p>
<ul>
<li>**<code>ip</code>**: IP of the server</li>
<li>**<code>port</code>**: Port of the server</li>
</ul>
<h3><a class="anchor" id="autotoc_md184"></a>
AsyncMqttClient&amp; setServer(const char* &lt;tt&gt;host&lt;/tt&gt;, uint16_t &lt;tt&gt;port&lt;/tt&gt;)</h3>
<p ><a class="el" href="class_set.html">Set</a> the server.</p>
<ul>
<li>**<code>host</code>**: Host of the server</li>
<li>**<code>port</code>**: Port of the server</li>
</ul>
<h3><a class="anchor" id="autotoc_md185"></a>
AsyncMqttClient&amp; setSecure(bool &lt;tt&gt;secure&lt;/tt&gt;)</h3>
<p >Whether or not to use SSL. Defaults to <code>false</code>.</p>
<ul>
<li>**<code>secure</code>**: SSL wanted or not.</li>
</ul>
<h3><a class="anchor" id="autotoc_md186"></a>
AsyncMqttClient&amp; addServerFingerprint(const uint8_t* &lt;tt&gt;fingerprint&lt;/tt&gt;)</h3>
<p >Adds an acceptable server fingerprint (SHA1). This may be called multiple times to permit any one of the specified fingerprints. By default, if no fingerprint is added, any fingerprint is accepted.</p>
<ul>
<li>**<code>fingerprint</code>**: Fingerprint to add</li>
</ul>
<h2><a class="anchor" id="autotoc_md187"></a>
Events handlers</h2>
<h3><a class="anchor" id="autotoc_md188"></a>
AsyncMqttClient&amp; onConnect(AsyncMqttClientInternals::OnConnectUserCallback &lt;tt&gt;callback&lt;/tt&gt;)</h3>
<p >Add a connect event handler.</p>
<ul>
<li>**<code>callback</code>**: Function to call</li>
</ul>
<h3><a class="anchor" id="autotoc_md189"></a>
AsyncMqttClient&amp; onDisconnect(AsyncMqttClientInternals::OnDisconnectUserCallback &lt;tt&gt;callback&lt;/tt&gt;)</h3>
<p >Add a disconnect event handler.</p>
<ul>
<li>**<code>callback</code>**: Function to call</li>
</ul>
<h3><a class="anchor" id="autotoc_md190"></a>
AsyncMqttClient&amp; onSubscribe(AsyncMqttClientInternals::OnSubscribeUserCallback &lt;tt&gt;callback&lt;/tt&gt;)</h3>
<p >Add a subscribe acknowledged event handler.</p>
<ul>
<li>**<code>callback</code>**: Function to call</li>
</ul>
<h3><a class="anchor" id="autotoc_md191"></a>
AsyncMqttClient&amp; onUnsubscribe(AsyncMqttClientInternals::OnUnsubscribeUserCallback &lt;tt&gt;callback&lt;/tt&gt;)</h3>
<p >Add an unsubscribe acknowledged event handler.</p>
<ul>
<li>**<code>callback</code>**: Function to call</li>
</ul>
<h3><a class="anchor" id="autotoc_md192"></a>
AsyncMqttClient&amp; onMessage(AsyncMqttClientInternals::OnMessageUserCallback &lt;tt&gt;callback&lt;/tt&gt;)</h3>
<p >Add a publish received event handler.</p>
<ul>
<li>**<code>callback</code>**: Function to call</li>
</ul>
<h3><a class="anchor" id="autotoc_md193"></a>
AsyncMqttClient&amp; onPublish(AsyncMqttClientInternals::OnPublishUserCallback &lt;tt&gt;callback&lt;/tt&gt;)</h3>
<p >Add a publish acknowledged event handler.</p>
<ul>
<li>**<code>callback</code>**: Function to call</li>
</ul>
<h2><a class="anchor" id="autotoc_md194"></a>
Operation functions</h2>
<h3><a class="anchor" id="autotoc_md195"></a>
bool connected()</h3>
<p >Return if the client is currently connected to the broker or not.</p>
<h3><a class="anchor" id="autotoc_md196"></a>
void connect()</h3>
<p >Connect to the server.</p>
<h3><a class="anchor" id="autotoc_md197"></a>
void disconnect(bool &lt;tt&gt;force&lt;/tt&gt; = false)</h3>
<p >Disconnect from the server.</p>
<ul>
<li>**<code>force</code>**: Whether to force the disconnection. Defaults to <code>false</code> (clean disconnection).</li>
</ul>
<h3><a class="anchor" id="autotoc_md198"></a>
uint16_t subscribe(const char* &lt;tt&gt;topic&lt;/tt&gt;, uint8_t &lt;tt&gt;qos&lt;/tt&gt;)</h3>
<p >Subscribe to the given topic at the given QoS.</p>
<p >Return the packet ID or 0 if failed.</p>
<ul>
<li>**<code>topic</code>**: Topic</li>
<li>**<code>qos</code>**: QoS</li>
</ul>
<h3><a class="anchor" id="autotoc_md199"></a>
uint16_t unsubscribe(const char* &lt;tt&gt;topic&lt;/tt&gt;)</h3>
<p >Unsubscribe from the given topic.</p>
<p >Return the packet ID or 0 if failed.</p>
<ul>
<li>**<code>topic</code>**: Topic</li>
</ul>
<h3><a class="anchor" id="autotoc_md200"></a>
uint16_t publish(const char* &lt;tt&gt;topic&lt;/tt&gt;, uint8_t &lt;tt&gt;qos&lt;/tt&gt;, bool &lt;tt&gt;retain&lt;/tt&gt;, const char* &lt;tt&gt;payload&lt;/tt&gt; = nullptr, size_t &lt;tt&gt;length&lt;/tt&gt; = 0, bool dup = false, uint16_t message_id = 0)</h3>
<p >Publish a packet.</p>
<p >Return the packet ID (or 1 if QoS 0) or 0 if failed.</p>
<ul>
<li>**<code>topic</code>**: Topic</li>
<li>**<code>qos</code>**: QoS</li>
<li>**<code>retain</code>**: Retain flag</li>
<li>**<code>payload</code>**: Payload. If unset, the payload will be empty</li>
<li>**<code>length</code>**: Payload length. If unset or set to 0, the payload will be considered as a string and its size will be calculated using <code>strlen(payload)</code></li>
<li>**<code>dup</code>**: Duplicate flag. If set or set to 1, the payload will be flagged as a duplicate</li>
<li>**<code>message_id</code>**: The message ID. If unset or set to 0, the message ID will be automtaically assigned. Use this with the DUP flag to identify which message is being duplicated </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
